using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Xml.Linq;
using JiraFhirUtils.SQLiteGenerator;

namespace JiraFhirUtils.Common.FhirDbModels;

[JfSQLiteTable(tableName: "CodeSystems")]
[JfSQLiteIndex(nameof(PackageKey), nameof(UnversionedUrl))]
[JfSQLiteIndex(nameof(PackageKey), nameof(Name))]
[JfSQLiteIndex(nameof(PackageKey), nameof(Id))]
public partial class CgDbCodeSystem : CgDbMetadataResourceBase
{
    public required bool? IsCaseSensitive { get; set; }
    public required string? ValueSetVersioned { get; set; }
    public required string? ValueSetUnversioned { get; set; }
    public required string? HierarchyMeaning { get; set; }
    public required bool? IsCompositional { get; set; }
    public required bool? VersionNeeded { get; set; }
    public required string? Content { get; set; }
    public required string? SupplementsVersioned { get; set; }
    public required string? SupplementsUnversioned { get; set; }
    public required int? Count { get; set; }

    [JfSQLiteIgnore]
    public string UiDisplay
    {
        get
        {
            if (string.IsNullOrEmpty(Name))
            {
                return "-";
            }
            return $"{Name}: {VersionedUrl}";
        }
    }
    [JfSQLiteIgnore]
    public string UiDisplayLong
    {
        get
        {
            if (string.IsNullOrEmpty(Name))
            {
                return "-";
            }
            return $"{Name}: {VersionedUrl}, Concepts: {Count}" +
                (string.IsNullOrEmpty(Description) ? string.Empty : " - " + Description);
        }
    }
}
